<Project Sdk="Microsoft.NET.Sdk">

    <PropertyGroup>
        <OutputType>Exe</OutputType>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <AssemblyName>DIME</AssemblyName>
        <RootNamespace>DIME</RootNamespace>
        <LangVersion>12</LangVersion>
        <Version>1.2.1</Version>
        <Title>DIME</Title>
        <Authors>MRIIOT</Authors>
        <Description>Data In Motion Enterprise</Description>
        <PackageProjectUrl>https://github.com/Ladder99/DIME</PackageProjectUrl>
        <RepositoryUrl>https://github.com/Ladder99/DIME</RepositoryUrl>
        <PackageId>MRIIOT.DIME</PackageId>
        <TargetFramework>net8.0</TargetFramework>
	<RuntimeIdentifiers>win-x64;linux-x64;linux-arm64</RuntimeIdentifiers>
	<SelfContained>false</SelfContained>
    </PropertyGroup>

    <ItemGroup>
      <PackageReference Include="Disruptor" Version="6.0.0" />
      <PackageReference Include="Google.Protobuf" Version="3.29.1" />
      <PackageReference Include="Grpc.Net.Client" Version="2.67.0" />
      <PackageReference Include="Grpc.Tools" Version="2.68.1">
        <PrivateAssets>all</PrivateAssets>
        <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      </PackageReference>
      <PackageReference Include="InfluxDB.Client" Version="4.19.0-dev.15190" />
      <PackageReference Include="Lextm.SharpSnmpLib" Version="12.5.5" />
      <PackageReference Include="libplctag" Version="1.5.2" />
      <PackageReference Include="MQTTnet" Version="4.3.7.1207" />
      <PackageReference Include="MTConnect.NET-Applications-Agents" Version="6.5.0" />
      <PackageReference Include="MTConnect.NET-SHDR" Version="6.5.0" />
      <PackageReference Include="nauful-LibUA-core" Version="1.0.31" />
      <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
      <PackageReference Include="NLog" Version="5.3.4" />
      <PackageReference Include="NLua" Version="1.7.3" />
      <PackageReference Include="NModbus" Version="3.0.81" />
      <PackageReference Include="SparkplugNet" Version="1.3.10" />
      <PackageReference Include="StackExchange.Redis" Version="2.8.22" />
      <PackageReference Include="Topshelf" Version="4.3.0" />
      <PackageReference Include="Topshelf.NLog" Version="4.3.0" />
      <PackageReference Include="TrakHound.Common" Version="0.1.6.6" />
      <PackageReference Include="YamlDotNet" Version="16.2.0" />
    </ItemGroup>

    <ItemGroup>
      <None Update="nlog.config">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="lua\json.lua">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="lua\moses.lua">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="lua\struct.lua">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="agent.config.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Lua\middleclass.lua">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Lua\stateful.lua">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="liblua54-arm64.so">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Connectors\SplunkEhSdk\Config\consoleSink1.yaml">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Connectors\SplunkEhSdk\Config\scriptSource1.yaml">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Connectors\SplunkEhSdk\Config\splunkEhSdkSink1.yaml">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Connectors\SplunkEhSdk\Config\main.yaml">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Connectors\SplunkEhSdk\Config\eipSource1.yaml">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Connectors\SplunkEhSdk\Config\httpServerSink1.yaml">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Connectors\SplunkEhSdk\Config\haasSource1.yaml">
        <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\ascCpcSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\consoleSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\eipSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\haasSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\httpServerSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\httpServerSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\influxLpSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\instanceMotor1A.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\instanceMotor1B.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\main.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\mettlerToledoScale1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\modbusSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\mqttSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\mqttSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\mtConnectSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\mtConnectSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\opcUaSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\redisSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\redisSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\scriptSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\shdrSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\smartPacSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\snmpSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\sparkplugBSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\splunkEhSdkSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\splunkHecSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\timebaseWsSource1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\All\trakhoundHttpSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\MqttMotors\main.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\MqttMotors\instanceMotor1A.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\MqttMotors\instanceMotor1B.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\MqttMotors\consoleSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\MqttMotors\mqttSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\MqttMotors\httpServerSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\consoleSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\httpServerSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\instanceMotor1A.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\instanceMotor1B.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\main.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\mqttSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\Examples\MqttMotors\redisSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
      <None Update="Configs\redisSink1.yaml">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </None>
    </ItemGroup>

	<!--
    <ItemGroup Condition="'$(RuntimeIdentifier)' == 'linux-arm64'">
      <Content Include="liblua54.so">
        <CopyToOutputDirectory>Always</CopyToOutputDirectory>
      </Content>
    </ItemGroup>
	-->

    <Target Name="CopyAndRenameFile" AfterTargets="Build">
      <Copy SourceFiles="$(ProjectDir)liblua54-arm64.so" 
            DestinationFiles="$(OutDir)runtimes/linux-arm64/native/liblua54.so" />
    </Target>

	<!--
    <ItemGroup>
      <Protobuf Include="Connectors\SplunkEhSdk\edgehub.proto" GrpcServices="Client" />
    </ItemGroup>
	-->

</Project>
